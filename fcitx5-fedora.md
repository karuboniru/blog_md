---
title: å¦‚ä½•ä¸‹å‘¨å°±åœ¨ Fedora 32 ç”¨ä¸Š Fcitx 5
date: 2020-08-30 17:44:07
updated: 2020-09-01 15:48:04
tags: 
categories: æ‰“åŒ…
---

ä¸€å¼€å§‹æƒ³äº†æƒ³è¦ä¸è¦åœ¨æ ‡é¢˜å†™ Fedoraï¼Œè§‰å¾—è¿˜æ˜¯å¿…è¦çš„ã€‚å› ä¸ºç›®å‰åªæœ‰ Arch Linux ï¼ˆå’Œ Debian å’Œ Ubuntuï¼‰å‡ºäºå¥—è¿‘ä¹çš„å…³ç³»æœ‰äº† Fcitx 5 å…¨å®¶æ¡¶ã€‚

ä¸ºä»€ä¹ˆæ˜¯ä¸‹å‘¨ï¼Ÿâ€”â€”å› ä¸º Fedora çš„ QAï¼Œ**åŒ…æœ€é•¿ä¼šåœ¨ [Bodhi] ç­‰ä¸€å‘¨ï¼Œé™¤éä½ ä»¬å¸®å¿™æµ‹è¯•ï¼Œç‚¹ä¸ª upvote** (à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ã€‚

æµ‹è¯•å¤§æ¦‚æ˜å¤©æˆ–è€…åå¤©ä¸Šçº¿ï¼Œæƒ³è¦å‚ä¸å°±`dnf install --enablerepo=updates-testing`æ¥è¿›è¡Œå®‰è£…ã€‚

***

## å»ºè®®å®‰è£…çš„åŒ…
 - fcitx5               
 - fcitx5-gtk
 - fcitx5-qt 
 - fcitx5-configtool    
 - fcitx5-chinese-addons

å¦å¤–ä¹‹å‰ç”¨äº†æˆ‘çš„ [copr] ç‰ˆæœ¬çš„äººï¼Œè¯·ä¿è¯æŠŠé‡Œé¢çš„åŒ…å¸è½½ä¹‹ååœ¨è¿›è¡Œå®‰è£…ï¼Œå¦åˆ™å¯èƒ½å‡ºç°å¥‡å¦™çš„å†²çªã€‚

è™½ç„¶åœ¨åˆ«çš„å‘è¡Œç‰ˆä¸Šé¢æœ€æ–°çš„ Fcitx 4/5 ä¸èƒ½å…±å­˜ï¼Œä½†æ˜¯åœ¨ Fedora ä¸Šèƒ½ï¼Œrpm èƒ½ä¼˜é›…çš„å¤„ç†è¡¨é¢ä¸Šçš„æ–‡ä»¶å†²çªã€‚
å¯¹äºåŸå› æ„Ÿå…´è¶£çš„å¯è§[ç¾¤é‡Œé¢çš„è®¨è®º]çš„ä¸Šä¸‹æ–‡ã€‚

## ç¯å¢ƒå˜é‡å’Œè‡ªå¯åŠ¨
### å¯¹äº KDE ç”¨æˆ·
``` Bash
$ sudo alternatives --config xinputrc
```

å³å¯ä¿®æ”¹å…¨å±€è¾“å…¥æ³•é…ç½®ã€‚ä½†æ˜¯æƒ³è¦ä¿®æ”¹è‡ªå·±çš„è¾“å…¥æ³•é…ç½®å¯ä»¥è€ƒè™‘ im-settings æˆ–è€…ä¸‹é¢çš„æ–¹æ³•ã€‚

### é€šç”¨åŠæ³•
å†™ä¸€ä¸ª
```
INPUT_METHOD=fcitx5
GTK_IM_MODULE=fcitx5
QT_IM_MODULE=fcitx5
XMODIFIERS=@im=fcitx5
```
æ”¾åˆ° `~/.config/environment.d/00-fcitx5.conf`

ç„¶åè¿è¡Œï¼ˆå½“ç„¶ `ln -s` å¯ä»¥æ¢æˆ `cp`ï¼‰
``` Bash
$ ln -s /usr/share/applications/fcitx5.desktop ~/.config/autostart/
```
åŒæ ·**æ³¨é”€ä¹‹åé‡æ–°ç™»é™†**å°±ä¼šç”Ÿæ•ˆã€‚ 

åˆ«çš„æƒ…å†µå¯ä»¥é…Œæƒ…å°è¯•ä¸Šè¿°ä¸¤ç§åŠæ³•ï¼Œåº”è¯¥è‡³å°‘æœ‰ä¸€ç§ä¼šç”Ÿæ•ˆã€‚

## ä¸€äº›å…¶ä»–çš„æç¤º
### å¯¹äº Gnome ç”¨æˆ·
è§ [æå…ˆç”Ÿçš„åšå®¢] æ–‡ç« ï¼Œå»ºè®®å®‰è£… **kimpanel** æ’ä»¶ä»¥æ”¹å–„ä½“éªŒã€‚(ä»¥ä¸‹å¼•ç”¨ block æ˜¯ç›´æ¥åšé¢œæ— è€»ç…§æŠ„çš„, æ„å‘³ç€å†…å®¹å¯èƒ½è¿‡æ—¶ï¼Œæ²¡å‡† Gnome å•†åº—çš„ç‰ˆæœ¬ä¹Ÿè¶…çº§å¥½ä½¿å‘¢ï¼Ÿ)

> ä¼—æ‰€å‘¨çŸ¥ï¼Œç½‘ç»œä¸Šå¹ Fcitx 5 çš„ç”¨æˆ·å¤§å¤šæ•°éƒ½æ˜¯ Arch Linux ç”¨æˆ·ã€è€Œä¸”ç”¨çš„éƒ½æ˜¯ KDEï¼Œæ²¡æœ‰äººå‘Šè¯‰ä½  Gnome-shell è¦æ€ä¹ˆåŠï¼Œä¸è¿‡ä¸‡å¹¸çš„æ˜¯ä¼Ÿå¤§çš„å›§è„¸çš„ Gnome shell æ’ä»¶æ˜¯æ”¯æŒ Fcitx 5 çš„ï¼Œå› ä¸ºç”¨çš„éƒ½æ˜¯ Kimpanelï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè£…äº†è¿™ä¸ª Gnome-shell extensionï¼Œæ— è®ºä½ æ˜¯ Fcitx 4 è¿˜æ˜¯ Fcitx 5ï¼Œéƒ½æ˜¯å¯ä»¥ç”¨çš„ï¼Œèµç¾å›§è„¸ï¼
> ä¸è¿‡è¿™ä¸ªæ’ä»¶åœ¨ Gnome å®˜æ–¹çš„ Extension ç½‘ç«™ä¸Šçš„ç‰ˆæœ¬æœ‰ä¸€äº›é—®é¢˜ï¼š
> 
> - [å¿«é€Ÿæ‰“å­—çš„æ—¶å€™ä¼šå‡ºç°éƒ¨åˆ†å†…å®¹æ˜¾ç¤ºä¸å…¨]
> - å¤šæ˜¾ç¤ºå™¨çš„æ—¶å€™ä¼šè·¨è¶Šæ˜¾ç¤ºå™¨å‡ºç°é€‰å­—æ¡†
> - [é”å±åè§£é”ä¼šå‡ºç°ä¸¤ä¸ª Indicator]
> 
> ä¸è¿‡è¿™ä¸‰ä¸ªé—®é¢˜éƒ½å·²ç»è¢«å›§è„¸ä¿®å¤äº†ï¼Œèµç¾å›§è„¸ï¼
>
> å®‰è£…çš„è¯è¿˜æ˜¯æ¨èå®‰è£… git çš„ç‰ˆæœ¬ï¼Œå› ä¸ºå®˜æ–¹çš„è¿˜æ²¡æœ‰æ›´æ–°ï¼š
> ```
> https://github.com/wengxt/gnome-shell-extension-kimpanel
> ```
> å®‰è£…ä¾èµ–ï¼šgettext cmake åç›´æ¥åœ¨ç›®å½•ä¸‹è¿è¡Œ ./install.sh å°±å¯ä»¥äº†ï¼Œè®°å¾—æŠŠåŸæœ¬çš„æ’ä»¶åˆ æ‰å†è£…ã€‚

### å›¾å½¢ç•Œé¢é…ç½®å·¥å…·
`fcitx5-configtool` å«æœ‰ `fcitx5-config-qt`ï¼Œå®‰è£…ä¹‹å`fcitx5-config`å°±ä¼šè°ƒç”¨ä¹‹ã€‚å¦å¤–è¿˜æ”¯æŒKCMé…ç½®ï¼Œå½“ç„¶æ˜¯KDEç”¨æˆ·ä¸“äº«äº†ã€‚

## Bug Report
é‡åˆ°é—®é¢˜ï¼Œå»ºè®®å…ˆåœ¨[Bugzilla]åé¦ˆï¼Œå¦‚æœæ˜¯æˆ‘çš„é”…ï¼ˆæ‰“åŒ…ç¿»è½¦ï¼‰ï¼Œæˆ‘å°±ä¿®ã€‚å¦‚æœæ˜¯å›§è„¸çš„é”…ï¼Œé‚£æˆ‘å°±æ‰¾å›§è„¸ä¿®ã€‚

å½“ç„¶è¦æ˜¯ä½ èƒ½åˆ¤æ–­æ˜¯å›§è„¸çš„é”…ï¼Œå»ºè®®ç›´æ¥å»ä¸Šæ¸¸æ‰¾å›§è„¸ä¿®ã€‚

## TODO List
 - {% cb fcitx5-configtool æ‹†åŒ…, true, true %}ï¼ŒæŠŠ `kcm-fcitx5` æ‹†å‡ºæ¥: **å·²ç»åœ¨ rawhide ä¸­å®Œæˆï¼ŒF32 å†ç­‰ç­‰å°± push**
 - {% cb false %} fcitx5-chinese-addons æ‹†åŒ…
 - {% cb false %} ~~Fedora 31 ä¸Šçš„ç¼–è¯‘~~, ä¸ä¼šæœ‰äº†, å› ä¸ºè²Œä¼¼ fmt ç‰ˆæœ¬å¤ªè€, ç¼–è¯‘ä¸è¿‡, è¿™ä¸ªåŒ… F31 Mass Rebuild ä¹‹åå±…ç„¶å°±æ²¡æ›´æ–°è¿‡. è™½ç„¶æˆ‘å¯ä»¥ Bundle ä¸€ä¸ª header-only çš„ fmt.

_ä¸ºä»€ä¹ˆç°åœ¨ä¸åšï¼Œè¿™äº›äº‹æƒ…ä¸å¤æ‚å•Šï¼Ÿ_ â€”â€”æ‡’ï¼Œä½†æ˜¯è¦æ˜¯ä½ ç¡®å®éœ€è¦ï¼Œ[ç»™æˆ‘è¯´ä¸€å£°]ï¼Œæˆ‘å°½å¿«ğŸ˜‚

## æ­¤å¤„åº”è¯¥æ„Ÿè°¢[å›§è„¸]
CSSlayerï¼ˆå›§è„¸ï¼‰å¯¹äºæ‰“åŒ…åšå‡ºäº†å·¨å¤§è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- èˆå»åˆ·è¹¦è¹¦è¹¦çš„æ—¶é—´æ·±å¤œæ¥ä¿® aarch64 ä¸Šçš„ bug
- å¸®æˆ‘è¯†åˆ«å‡ºä¸€ä¸ª s390x ä¸Šçš„é”™è¯¯çš„çœŸæ­£åŸå› ï¼Œè¿˜ç»™ KenLM æäº† PRï¼Œä¿®å¤äº†åæœ‰å…«ä¹ä¸ä¼šæœ‰æ´»äººé‡åˆ°çš„ s390x ä¸Šçš„ä¸€ä¸ªå¯èƒ½å¯¼è‡´æ•´ä¸ª chinese-addons ä¸å¥½ä½¿çš„ bug

è¿™é‡Œåæ§½ä¸€ä¸‹ Fedoraï¼ŒçœŸçš„æœ‰äººä¼šåœ¨ s390x å¤§æœºä¸Šé¢**è·‘æ¡Œé¢**å—ï¼Ÿä¸è¿‡ä¿®äº†ä¹Ÿå¥½ï¼Œæ²¡å‡†ä¼šæœ‰ä»€ä¹ˆåˆ«çš„å¤§ç«¯åºç”¨æˆ·ã€‚

***
æœ€åé«˜å‘¼ä¸‰éï¼š**èµç¾å›§è„¸ï¼èµç¾å›§è„¸ï¼èµç¾å›§è„¸ï¼**

[Bodhi]: https://bodhi.fedoraproject.org/updates/FEDORA-2020-5465c02630
[copr]: https://copr.fedorainfracloud.org/coprs/yanqiyu/fcitx5
[Arch Wiki]: https://wiki.archlinux.org/index.php/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
[å›§è„¸]: https://www.csslayer.info/
[Bugzilla]: https://bugzilla.redhat.com/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&classification=Fedora&component=fcitx5&list_id=11319828&product=Fedora&product=Fedora%20EPEL
[æå…ˆç”Ÿçš„åšå®¢]: https://plumz.me/archives/11740/
[å›§è„¸çš„åšå®¢]: https://www.csslayer.info/wordpress/fcitx-dev/%e5%a6%82%e4%bd%95%e7%8e%b0%e5%9c%a8%e5%b0%b1%e5%9c%a8-arch-linux-%e7%94%a8%e4%b8%8a-fcitx-5/
[å¿«é€Ÿæ‰“å­—çš„æ—¶å€™ä¼šå‡ºç°éƒ¨åˆ†å†…å®¹æ˜¾ç¤ºä¸å…¨]: https://github.com/wengxt/gnome-shell-extension-kimpanel/issues/46
[é”å±åè§£é”ä¼šå‡ºç°ä¸¤ä¸ª Indicator]: https://github.com/wengxt/gnome-shell-extension-kimpanel/issues/47
[ç¾¤é‡Œé¢çš„è®¨è®º]: https://t.me/fedorazh/63996
[ç»™æˆ‘è¯´ä¸€å£°]: mailto:yanqiyu@fedoraproject.org